!function(i){i.fn.extend({ssImgBox:function(s){function t(){var i='<div style="clear:both;"></div><div class="ss-display"><div class="ss-options"><span class="ss-close">收起</span><a target="_blank" class="ss-o-img">原图</a><span class="ss-sinistrogyration">向左转</span><span class="ss-dextrorotation">向右转</span></span></div><div class="ss-prev"><i></i></div><div class="ss-next"><i></i></div><img/></div>';h.append(i),e()}function e(){var t=h.find(".ss-thumbnail"),e=h.find(".ss-display");new Image;t.each(function(){s.imageArray.push(i(this).find("img").attr("src"))}),h.find(".ss-close").click(function(){e.hide(s.open_speed),h.find(".ss-thumbnail").removeClass("ss-thumbnail-current"),s.isOpen=!1}),t.click(function(){s.i=-1;var t=i(this).find("img").attr("src");a(e,t,this)}),n(e,t)}function a(t,e,a){var n=new Image;h.find(".ss-thumbnail").removeClass("ss-thumbnail-current"),i(a).addClass("ss-thumbnail-current"),n.onload=function(){var h=n.width,d=n.height,c=t.find("img");c.attr("src",e),c.css({"margin-top":0,"margin-left":0}),c.removeClass(),t.css({width:h+"px",height:d+38+"px"}),s.isOpen?s.isOpen&&e==s.activeImage&&(i(a).removeClass("ss-thumbnail-current"),t.hide(s.open_speed),s.isOpen=!1):(s.isOpen=!0,t.show(s.open_speed)),s.activeImage=e,s.activeImage==s.imageArray[0]?t.find(".ss-prev").css("display","none"):t.find(".ss-prev").css("display","block"),s.activeImage==s.imageArray[s.imageArray.length-1]?t.find(".ss-next").css("display","none"):t.find(".ss-next").css("display","block"),r()},n.src=e,t.find("a").attr("href",e)}function n(t,e){h.find(".ss-prev").click(function(){var n=i.inArray(s.activeImage,s.imageArray),r=s.imageArray[n-1];a(t,r,i(e[n-1]))}),h.find(".ss-next").click(function(){var n=i.inArray(s.activeImage,s.imageArray),r=s.imageArray[n+1];a(t,r,i(e[n+1]))})}function r(){h.find(".ss-display .ss-sinistrogyration").unbind("click").click(function(){-1==s.i&&(s.i=3),1==s.right&&(s.i=s.i-2,s.right=0);var i=h.find(".ss-display"),t=h.find(".ss-display img");t.removeClass(),t.addClass("ss-rotating-"+s.i),2==s.i?(t.css({"margin-top":0,"margin-left":0}),i.css({width:t.width()+"px",height:t.height()+38+"px"})):(t.css({"margin-top":(t.width()-t.height())/2,"margin-left":-(t.width()-t.height())/2}),i.css({width:t.height()+"px",height:t.width()+38+"px"})),2==s.i&&1==s.right?(console.log("adfdfs"),s.i=-1,t.removeClass(),t.css({"margin-top":0,"margin-left":0}),i.css({width:t.width()+"px",height:t.height()+38+"px"}),s.right=0):s.i--,-1==s.i?(t.removeClass(),t.css({"margin-top":0,"margin-left":0}),i.css({width:t.width()+"px",height:t.height()+38+"px"}),s.left=0):s.left=1,console.log(s.i)}),h.find(".ss-display .ss-dextrorotation").unbind("click").click(function(){var i=h.find(".ss-display"),t=h.find(".ss-display img");-1==s.i&&(s.i=1),1==s.left&&(s.i=s.i+2,s.left=0),t.removeClass(),t.addClass("ss-rotating-"+s.i),2==s.i?(t.css({"margin-top":0,"margin-left":0}),i.css({width:t.width()+"px",height:t.height()+38+"px"})):(t.css({"margin-top":(t.width()-t.height())/2,"margin-left":-(t.width()-t.height())/2}),i.css({width:t.height()+"px",height:t.width()+38+"px"})),2==s.i&&1==s.left?(console.log("adfdfs"),s.i=-1,t.removeClass(),t.css({"margin-top":0,"margin-left":0}),i.css({width:t.width()+"px",height:t.height()+38+"px"}),s.left=0):s.i++,5==s.i?(t.removeClass(),t.css({"margin-top":0,"margin-left":0}),i.css({width:t.width()+"px",height:t.height()+38+"px"}),s.i=-1,s.right=0):s.right=1,console.log(s.i)})}var s=i.extend({t_width:40,o_width_max:690,imageArray:new Array,isOpen:!1,activeImage:null,open_speed:300,leftDeg:270},s),h=this;return t(),this}})}(jQuery);